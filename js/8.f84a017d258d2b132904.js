(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{424:function(t,e,n){},425:function(t,e,n){},472:function(t,e,n){"use strict";n(424)},473:function(t,e,n){"use strict";n(425)},475:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-sheet",[n("Header",{scopedSlots:t._u([{key:"items",fn:function(){return[n("Items",{staticClass:"d-none d-md-flex"})]},proxy:!0},{key:"endItems",fn:function(){return[n("Logout",{staticClass:"d-none d-md-flex"}),t._v(" "),n("v-app-bar-nav-icon",{staticClass:"d-flex d-md-none",on:{click:function(e){t.$refs.sidebar.isOpen=!t.$refs.sidebar.isOpen}}})]},proxy:!0}])}),t._v(" "),n("v-main",{staticClass:"main"},[n("v-container",[n("v-toolbar",{staticClass:"my-2",attrs:{flat:""}},[n("v-btn",{staticClass:"mx-2 cyan white--text",attrs:{depressed:""},on:{click:t.addItem}},[t._v("新增")])],1),t._v(" "),n("v-select",{staticClass:"mt-4",attrs:{color:"cyan",items:t.countyList,label:"縣市",loading:t.countyLoading},on:{change:t.county_change},scopedSlots:t._u([{key:"no-data",fn:function(){return[n("div",{staticClass:"pa-2"},[t._v(t._s(t.countyLoading?"載入中...":"空資料"))])]},proxy:!0},{key:"selection",fn:function(e){var a=e.item;return[n("div",{staticClass:"text-truncate"},[t._v(t._s(a.text))])]}},{key:"item",fn:function(e){var a=e.item,i=e.attrs,s=e.on;return[n("v-list-item",t._g(t._b({},"v-list-item",i,!1),s),[n("v-list-item-content",[n("v-list-item-title",{attrs:{id:i["aria-labelledby"]},domProps:{textContent:t._s(a.text)}})],1)],1)]}}]),model:{value:t.countyValue,callback:function(e){t.countyValue=e},expression:"countyValue"}}),t._v(" "),t.countyValue?n("v-data-table",{attrs:{headers:t.headers,items:t.stationList,loading:t.stationLoading,"loading-text":"載入中...",page:t.page,"items-per-page":t.itemsPerPage,"hide-default-footer":""},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[n("div",{staticClass:"pa-2"},[t._v(t._s(t.stationLoading?"載入中...":"空資料"))])]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[n("div",{staticClass:"ma-2"},[n("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v("mdi-delete")])],1)]}},{key:"footer",fn:function(){return[!t.stationLoading&&t.stationList.length?n("Pagination",{attrs:{length:t.stationList.length,page:t.page,pageCount:t.pageCount,itemsPerPage:t.itemsPerPage},on:{"update:page":function(e){t.page=e},"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e}}}):t._e()]},proxy:!0}],null,!1,1429325101)}):t._e()],1)],1),t._v(" "),n("DetectSiteNewItem",{ref:"newItem",on:{save:t.detectSiteNewItem_save}}),t._v(" "),n("v-overlay",{attrs:{value:t.running}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}},[t._v("執行中...")])],1),t._v(" "),n("Sidebar",{ref:"sidebar",scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"d-flex pa-4"},[n("Logout"),t._v(" "),n("v-spacer"),t._v(" "),n("v-icon",{on:{click:function(e){t.$refs.sidebar.isOpen=!1}}},[t._v("\n          mdi-close\n        ")])],1),t._v(" "),n("Items",{staticClass:"d-flex flex-column"})]},proxy:!0}])})],1)};a._withStripped=!0;var i=n(401),s=n(402),o=n(403),c=n(404),r=n(426),u=n(399),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("v-card",[n("v-card-title",{staticClass:"justify-center"},[n("span",{staticClass:"headline"},[t._v("新增")])]),t._v(" "),n("v-card-text",[n("v-container",[n("div",{staticClass:"row"},t._l(t.items,(function(e,a){return n("TableItem",{key:"item"+a,staticClass:"pa-1",attrs:{data:t.data,items:t.items,name:a,item:e}})})),1)])],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{depressed:""},on:{click:function(e){return t.cancelItem(t.items)}}},[t._v("\n        取消\n      ")]),t._v(" "),n("v-btn",{attrs:{depressed:"",color:"cyan white--text"},on:{click:function(e){return t.saveItem(t.items)}}},[t._v("\n        儲存\n      ")])],1)],1)],1)};l._withStripped=!0;var d=n(406),v=n(405),m=n(411),f={mixins:[v.validationMixin],components:{TableItem:m.a},validations:{data:{county:{required:d.required},station:{required:d.required}}},data:function(){var t=this;return{data:{},items:{county:{label:"縣市",class:"col-12",type:"select",list:[],loading:!1,errors:function(e){if(t.$v.data[e].$dirty)return t.$v.data[e].required?void 0:"請填寫這個欄位。"}},station:{label:"檢測站點",class:"col-12",errors:function(e){if(t.$v.data[e].$dirty)return t.$v.data[e].required?void 0:"請填寫這個欄位。"}}},show:!1}},mounted:function(){var t=this;this.items.county.loading=!0,Object(u.c)().then((function(e){t.items.county.loading=!1,t.items.county.list=e}))},methods:{reset:function(){this.$v.data.$reset(),this.data={}},cancelItem:function(t){this.show=!1},saveItem:function(t){this.$v.data.$touch(),this.$v.data.$error||(this.$emit("save",this.data),this.show=!1)}},computed:{}},p=(n(472),n(115)),g=Object(p.a)(f,l,[],!1,null,"0ca3abbe",null);g.options.__file="src/vue/page/components/DetectSiteNewItem.vue";var h=g.exports,_={components:{Header:i.a,Logout:s.a,Items:o.a,Sidebar:c.a,DetectSiteNewItem:h,Pagination:r.a},data:function(){return{page:1,pageCount:0,itemsPerPage:15,countyList:[],countyValue:"",countyLoading:!1,headers:[{text:"站名",value:"text"},{text:"動作",value:"actions",sortable:!1}],stationList:[],stationLoading:!1,stationValue:"",running:!1}},mounted:function(){var t=this;this.countyLoading=!0,Object(u.c)().then((function(e){t.countyLoading=!1,t.countyList=e}))},methods:{county_change:function(){this.stationUpdate()},stationUpdate:function(){var t=this;this.stationList=[],this.stationLoading=!0,Object(u.d)(this.countyValue).then((function(e){t.stationLoading=!1,t.stationList=e}))},addItem:function(){this.$refs.newItem.reset(),this.$refs.newItem.show=!0},saveItem:function(t){console.log(t)},deleteItem:function(t){var e=this;console.log(t),this.running=!0,Object(u.a)().then((function(){e.running=!1,console.log("delete"),e.stationUpdate()}))},detectSiteNewItem_save:function(t){var e=this;this.running=!0,Object(u.i)(t).then((function(){e.running=!1,console.log("new",t),e.countyValue===t.county&&e.stationUpdate()}))}},computed:{}},y=(n(473),Object(p.a)(_,a,[],!1,null,"75227250",null));y.options.__file="src/vue/page/DetectSite.vue";e.default=y.exports}}]);